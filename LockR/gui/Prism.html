<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
        <title>Enigma</title>

        <script type="text/javascript">
            console.oldLog = console.log;

            console.log = function(value)
            {
                console.oldLog(value);
                var div = document.getElementById('console');
                div.innerHTML = div.innerHTML + " </br> " + value;
            };
        </script>

        <script type="text/javascript" defer="true" src="engine/Enigma.js"></script>
        <script type="text/javascript">

//var a Enigma_1.PossibleAnswer[0]; // anche [0] sarà in un ciclo for
//dato che devo farlo anche per le altre lettere.

//var d = Enigma_1.passlength

            window.onload = function() {
                var getDOMelements = [];
                var getDOMzIndex = [];
                var d = 10;
                document.body.innerHTML = document.body.innerHTML + '<div id="Prism"></div>';
                var f = document.getElementById("Prism");
                f.style.cssText = "-webkit-transform-style: preserve-3d; -webkit-transform:rotateY(40deg);";
                var a = Array("1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "J");
                var b = a.length;

                for (k = 0; k < d; k++) {

                    f.innerHTML = f.innerHTML + '<div id="Letter' + k + '"></div>';

                    var e = document.getElementById('Letter' + k);

                    e.style.width = "30px";
                    e.style.height = "50px";
                    e.style.marginLeft = "40px";
                    e.style.position = "relative";
                    e.style.float = "left";

                    var u = 0;
                    var w = 0;
                    var o = 0;
                    var r = 0;
                    for (i = 0; i <= b; i++) {

                        var angle = i * (360 / b);

                        e.innerHTML = e.innerHTML + '<div id="zIndex' + k + '_' + i + '"><div id="Element' + k + '_' + i + '">' + a[i % b] + '</div></div>';

                        var l = document.getElementById('Element' + k + "_" + i);
                        var q = document.getElementById('zIndex' + k + "_" + i);

                        l.style.cssText = "top:300px;position:absolute; width: 40px !important; height: 50px !important; font-size: 250%;box-sizing: border-box; border: 1px solid red; background-color:yellow; text-align:center; line-height:50px; ";
                        l.style.transition = "-webkit-transform 2s linear";
                        q.style.zIndex = Math.abs((i - b / 2 + (b % 2) / 2) * 10 * b - i);
                        q.style.position = 'relative';

                        w = w + (-50) * (1 + Math.cos(angle * (Math.PI / 180)));
                        u = w - ((-50) / 2) * (1 + Math.cos(angle * (Math.PI / 180))) + i * 50;

                        o = o + (50) * (Math.sin(angle * (Math.PI / 180)));
                        r = o - ((50) / 2) * (Math.sin(angle * (Math.PI / 180)));

                        l.style.webkitTransform = 'translateZ(' + r + 'px) translateY(' + u + 'px) rotateX(' + (360 - angle) + 'deg)';
                    }
                    var firstvalueId = document.getElementById('Element' + k + "_0");
                    firstvalueId.style.visibility = "hidden";
                }



                f.innerHTML = f.innerHTML + "<div style='cursor:pointer; width:200px; height:50px; background-color:green; position:absolute; margin-top:500px; line-height:50px; text-align:center;' id='rotate'> CLICK ME </div>";

                for (k = 0; k < d; k++) {
                    getDOMelements[k] = [];
                    getDOMzIndex[k] = [];
                    for (i = 0; i <= b; i++) {
                        getDOMelements[k][i] = document.getElementById('Element' + k + "_" + i);
                        getDOMzIndex[k][i] = document.getElementById('zIndex' + k + "_" + i);
                    }
                }
                ;

                var clock = 0;
                document.getElementById("rotate").onclick = function rotate()
                {

                    for (k = 0; k < d; k++) {
                        var firstvalue = getDOMelements[k][0].style.cssText;
                        var firstvaluezIndex = getDOMzIndex[k][0].style.cssText;

                        for (i = 0; i <= b; i++) {



                            if (i != b) {

                                getDOMzIndex[k][i].style.cssText = getDOMzIndex[k][(i + 1)].style.cssText;
                                getDOMelements[k][i].style.cssText = getDOMelements[k][(i + 1)].style.cssText;

                            }
                            else {

                                getDOMelements[k][(b + 1 - clock) % (b + 1)].innerHTML = getDOMelements[k][b - clock].innerHTML;
                                getDOMelements[k][b - clock].style.visibility = "hidden";

                                getDOMzIndex[k][i].style.cssText = firstvaluezIndex;
                                getDOMelements[k][i].style.cssText = firstvalue;

                            }


                        }
                    }
                    clock = (clock + 1) % (b + 1);

                }

            };



        </script>


    </head>

    <body>
        <div id="console" style="width:500px; background-color:red; float:right;"></div>
    </body>
</html>